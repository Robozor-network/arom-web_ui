<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{{title}}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/bootstrap.min.css" rel="stylesheet">
    <link href="dashboard.css" rel="stylesheet">
    <script type="text/javascript" src="http://cdn.robotwebtools.org/EventEmitter2/current/eventemitter2.js"></script>
    <script type="text/javascript" src="http://cdn.robotwebtools.org/roslibjs/current/roslib.js"></script>
    <script type="text/javascript" src="http://cdn.robotwebtools.org/roslibjs/current/core_ROS.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript">
      var ros = new ROSLIB.Ros({
          //url : 'ws://telescopeC.local:9090'
          url : 'ws://192.168.1.111:9090'
      }); 

      ros.on('connection', function() {
           var fbDiv = document.getElementById('feedback');
           fbDiv.innerHTML += "<p>Connected to websocket server.</p>";
      });

      ros.on('error', function(error) {
          var fbDiv = document.getElementById('feedback');
          fbDiv.innerHTML += "<p>Error connecting to websocket server.</p>";
      });

      ros.on('close', function() {
          var fbDiv = document.getElementById('feedback');
          fbDiv.innerHTML += "<p>Connection to websocket server closed.</p>";
      });

      var MountControl = new ROSLIB.Topic({
          ros : ros,
          name : '/arom/mount',
          messageType : 'arom/DriverControlm'    // tohle se zjisti v ''rostopic info ''
      });

      var MountMessage = new ROSLIB.Message({   //rosmsg show arom/DriverControlm
          name : "",
          type : "",
          data : "",
          validate : "",
          check : ""
      });
      var nodes = []
      
      ros.getNodes(function(params) {
          var i = 0;
          var len = params.length;
          for (; i < len; i++) { 
            if (params[i].indexOf("AROM") > -1){
              nodes.push(params[i]);
            }
          }
          console.log(nodes);
       });
      console.log(nodes);

    </script>

    {% block meta %}{% end %}
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">{{title}}</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            {% for menu_item in [["Vec 1", "#"], ["Vec 2", "#"], ["Vec 3", "#"],]%}
              <li><a href="{{menu_item[1]}}">{{menu_item[0]}}</a></li>
            {% end %}
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-2 col-md-2 sidebar">
          <ul class="nav nav-sidebar" id="leftmenu">
            {% for menu_item in leftmenu %}
              <li {% if menu_item[1] == actual %}class="active"{% end %} ><a href="{{menu_item[1]}}">{{menu_item[0]}}</a></li>
            {% end %}
          </ul>
        </div>
        <div class="col-sm-10 col-sm-offset-2 main">
          <div class="row">
            {% block container %} {% end %}
          </div>
        </div>
      </div>
    </div>

    <script src="/bootstrap.min.js" type="text/html"></script>
  </body>
</html>
